- id: '1606926697561'
  alias: Home Assistant - Startup automation
  description: Sends push notification to OnePlus when HA is started and turns ons
    cameras.
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: notify.rens
    data:
      title: HA Started
      message: Home Assistant succesfully Started
      data:
        channel: System
        importance: low
  - service: camera.turn_on
    data: {}
    target:
      area_id:
      - babykamer
      - zolder
      - 2bf8bf6a88fe7668c26a7c9d15f993e9
  mode: single
- id: '1606926764664'
  alias: Home Assistant - Stop notification
  description: Sends push notification to OnePlus when HA is shutdown
  trigger:
  - platform: homeassistant
    event: shutdown
  condition: []
  action:
  - service: notify.rens
    data:
      title: HA Stopped
      message: Home Assistant was Stopped
      data:
        channel: System
        importance: low
  mode: single
- id: '1607178039348'
  alias: Alarm - Trigger the Alarm (Motion)
  description: Triggers the Alarm on Motion detection
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.woonkamer_movement
    - binary_sensor.eetkamer_movement
    - binary_sensor.keuken_movement
    from: 'off'
    to: 'on'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: alarm_control_panel.ha_alarm
      state:
      - armed_away
      - armed_night
    - condition: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      state:
      - docked
      - unavailable
  action:
  - service: alarm_control_panel.alarm_trigger
    data: {}
    entity_id: alarm_control_panel.ha_alarm
  mode: single
- id: '1607443881376'
  alias: Alarm - Alarm Pending
  description: Play alarm pending sound and show security page on Nest Hub
  trigger:
  - platform: state
    entity_id: alarm_control_panel.ha_alarm
    to: pending
  condition: []
  action:
  - service: notify.all_devices
    data:
      title: Alarm
      message: Het alarm zal over 60 seconden afgaan!
      data:
        channel: Alarm
        importance: high
        actions:
        - action: alarm_disarm
          title: Alarm uitschakelen
        - action: URI
          title: Open Alarm Paneel
          uri: lovelace/security
  - service: media_player.play_media
    data:
      media_content_id: https://home.rensverhagen.nl/local/AlarmPending60.mp3
      media_content_type: audio/mp3
    entity_id: media_player.google_home
  - service: script.show_alarm_panel
  mode: single
- id: '1607444176030'
  alias: Alarm - Alarm Triggered
  description: Play alarm sound and sent notification to mobile
  trigger:
  - platform: state
    entity_id: alarm_control_panel.ha_alarm
    to: triggered
  condition: []
  action:
  - service: notify.all_devices
    data:
      title: Alarm
      message: Het alarm is afgegaan!
      data:
        channel: Alarm
        importance: high
        actions:
        - action: alarm_disarm
          title: Alarm uitschakelen
        - action: URI
          title: Open Alarm Paneel
          uri: lovelace/security
  - service: media_player.play_media
    entity_id: media_player.google_home
    data:
      media_content_id: https://home.rensverhagen.nl/local/Alarm.mp3
      media_content_type: audio/mp3
  mode: single
- id: '1607601953191'
  alias: Lights - Eetkamer Turn on
  description: Turns on lights in Eetkamer when it is dark and motion is detected
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.eetkamer_movement
    - binary_sensor.achterdeur
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.eetkamer_lightlevel
    below: '100'
  - condition: state
    entity_id: light.eetkamer
    state: 'off'
    for:
      seconds: 10
  action:
  - service: light.turn_on
    entity_id: light.eetkamer
    data:
      brightness_pct: 90
  mode: single
- id: '1607602424829'
  alias: Lights - Woonkamer Turn on
  description: Turns on lights in Woonkamer when it is dark and motion is detected.
  trigger:
  - platform: state
    entity_id: binary_sensor.woonkamer_movement
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.woonkamer_lightlevel
    below: '100'
  - condition: state
    entity_id: light.woonkamer
    state: 'off'
    for:
      seconds: 10
  action:
  - service: light.turn_on
    data: {}
    entity_id: light.woonkamer
  mode: single
- id: '1607689290224'
  alias: Test Automation
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.test_toggle
    to: 'on'
    from: 'off'
  condition: []
  action:
  - service: notify.rens
    data:
      title: Test
      message: 'from: ''off'' to: ''on'''
  mode: single
- id: '1607713120959'
  alias: 'Input Boolean: Sleep - Turn off'
  description: Turn off Input Sleep Boolean when motion is detected
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.woonkamer_movement
    - binary_sensor.eetkamer_movement
    - binary_sensor.keuken_movement
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.sleeping
    state: 'on'
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.sleeping
  mode: single
- id: '1608586872962'
  alias: Lights - Eetkamer Turn off
  description: Turns off lights in Eetkamer when no precense is detected
  trigger:
  - platform: state
    entity_id: binary_sensor.eetkamer_presence
    to: 'off'
    for:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  condition:
  - condition: state
    entity_id: light.eetkamer
    state: 'on'
    for: 0:01:00
  action:
  - service: light.turn_off
    entity_id: light.eetkamer
  mode: single
- id: '1608601873724'
  alias: Kerstboom aan / uit
  description: ''
  triggers:
  - entity_id:
    - input_boolean.sleeping
    trigger: state
  - trigger: state
    entity_id:
    - input_boolean.home_presence
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.sleeping
        state: 'off'
      - condition: state
        entity_id: input_boolean.home_presence
        state: 'on'
      sequence:
      - action: switch.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: switch.smart_switch_01
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_boolean.sleeping
          state: 'on'
        - condition: state
          entity_id: input_boolean.home_presence
          state: 'off'
      sequence:
      - action: switch.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: switch.smart_switch_01
  mode: single
- id: '1608745478499'
  alias: Lights - Keuken Turn on
  description: Turns on lights in Keuken when it is dark and motion is detected
  trigger:
  - platform: state
    entity_id: binary_sensor.keuken_movement
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: sensor.keuken_lightlevel
    below: '100'
  - condition: state
    entity_id: light.keuken
    state: 'off'
    for:
      seconds: 10
  action:
  - service: light.turn_on
    entity_id: light.keuken
    data:
      brightness_pct: 85
  mode: single
- id: '1608745639683'
  alias: Lights - Keuken Turn off
  description: Turns off lights in Keuken when no presence is detected
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.keuken_presence
    to: 'off'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  condition:
  - condition: state
    entity_id: light.keuken
    state: 'on'
    for: 0:01:00
  action:
  - service: light.turn_off
    entity_id: light.keuken
  mode: single
- id: '1610579086841'
  alias: Alarm - Trigger the Alarm (Doors)
  description: Triggers the Alarm only on door sensors
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.achterdeur
    - binary_sensor.voordeur
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: alarm_control_panel.ha_alarm
    state:
    - armed_night
    - armed_away
  action:
  - service: alarm_control_panel.alarm_trigger
    data: {}
    entity_id: alarm_control_panel.ha_alarm
  mode: single
- id: '1610579800442'
  alias: Climate - Zolder Heating Turn off
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.zolderkamer_temperature
    above: 20.5
  condition:
  - condition: state
    entity_id: switch.smart_switch_1
    state: 'on'
  action:
  - service: switch.turn_off
    data: {}
    entity_id: switch.smart_switch_1
  mode: single
- id: '1627808388677'
  alias: Cleanup - Vacuum Daily
  description: Start Xiaomi Roborock cleanup when we're sleeping and last cleanup
    was > 1 day ago
  trigger:
  - platform: time
    at: input_datetime.cleanup_time
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.sleeping
      state: 'on'
    - condition: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      attribute: status
      state:
      - Docked
      - Charging
  action:
  - device_id: 63e78c663d8faa6db81dd0f4298c673b
    domain: vacuum
    entity_id: vacuum.xiaomi_vacuum_cleaner
    type: clean
  mode: single
- id: '1641158665593'
  alias: Car - Unlock Charging Port
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.voordeur
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: binary_sensor.model_3_charger_sensor
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.model_3_battery_sensor
    above: '85'
  - condition: state
    entity_id: device_tracker.model_3_location_tracker
    state: home
  action:
  - service: lock.unlock
    target:
      entity_id: lock.model_3_charger_door_lock
  mode: single
- id: '1644962344513'
  alias: Doorbell - Send notification
  description: Send notification when doorbell is pressed to all devices
  trigger:
  - type: turned_on
    platform: device
    device_id: b080a8910a40998b3b6401335df8fc6e
    entity_id: binary_sensor.doorbell
    domain: binary_sensor
  condition: []
  action:
  - service: notify.all_devices
    data:
      title: Ding dong!
      message: Er staat iemand bij de deur
      data:
        channel: Doorbell
        importance: high
        image: /api/camera_proxy/camera.voordeur
        actions:
        - action: URI
          title: Toon camera voordeur
          uri: entityId:camera.voordeur
  - service: camera.turn_on
    data: {}
    target:
      entity_id: camera.voordeur
  mode: single
- id: '1644962908293'
  alias: Doorbell - (De)Activate Chime
  description: Deactivate doorbell chime when we are sleeping and turn on when we
    are awake
  trigger:
  - platform: state
    entity_id: input_boolean.sleeping
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.sleeping
        state: 'on'
      sequence:
      - type: turn_off
        device_id: b080a8910a40998b3b6401335df8fc6e
        entity_id: switch.doorbell_chime_active
        domain: switch
    - conditions:
      - condition: state
        entity_id: input_boolean.sleeping
        state: 'off'
      sequence:
      - type: turn_on
        device_id: b080a8910a40998b3b6401335df8fc6e
        entity_id: switch.doorbell_chime_active
        domain: switch
    default: []
  mode: single
- id: '1659563358634'
  alias: Waste - Turn on Waste Collector
  description: When waste needs to be picked-up next day, enable waste collector so
    that alerts notifications are sent to all devices.
  trigger:
  - platform: time
    at: '18:00:00'
  condition:
  - condition: state
    entity_id: input_boolean.waste_collect
    state: 'off'
  - condition: numeric_state
    entity_id: sensor.afvalwijzer_next_in_days
    below: '2'
  action:
  - wait_for_trigger:
    - platform: state
      entity_id:
      - input_boolean.home_presence
      to: 'on'
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.waste_collect
  mode: single
- id: '1660266676956'
  alias: Lights - Philips Hue Dimmer Switch - Woonkamer [BLUEPRINT ON]
  description: ''
  use_blueprint:
    path: vanstinator/zha-philips-hue-dimmer-switch-rwl020-rwl021.yaml
    input:
      remote: c0292cc5e66a7cc86d402e11f055c168
      light:
        entity_id: light.woonkamer
      force_brightness: true
      brightness: 60
- id: '1661847323319'
  alias: Lights - Philips Hue Dimmer Switch - Woonkamer [BLUEPRINT OFF]
  description: ''
  use_blueprint:
    path: Jessendelft/hue_dimmer_switchV3.yaml
    input:
      remote: c0292cc5e66a7cc86d402e11f055c168
      light: light.woonkamer
      min_brightness: 0
      button_on_single:
      - service: light.turn_on
        data:
          color_temp: 350
        target:
          entity_id: light.woonkamer
- id: '1661973733840'
  alias: Lights - Schuur Ledstrip Run Colorloop
  description: ''
  use_blueprint:
    path: hugalafutro/Color_Loop.yaml
    input:
      cl_light:
        entity_id:
        - light.schuur_ledstrip_raam
- id: '1662031659290'
  alias: Alarm - Sync Alarm Control Panel States
  description: This automation syncs the HA Alarm state with other alarm panels such
    as the Eufy Cameras
  trigger:
  - platform: state
    entity_id:
    - alarm_control_panel.ha_alarm
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: alarm_control_panel.ha_alarm
        state: armed_away
      sequence:
      - service: alarm_control_panel.alarm_arm_away
        data: {}
        target:
          entity_id:
          - alarm_control_panel.dex
          - alarm_control_panel.extra
          - alarm_control_panel.kate
          - alarm_control_panel.homebase
    - conditions:
      - condition: state
        entity_id: alarm_control_panel.ha_alarm
        state: armed_night
      sequence:
      - service: alarm_control_panel.alarm_arm_night
        data: {}
        target:
          entity_id:
          - alarm_control_panel.extra
          - alarm_control_panel.homebase
    - conditions:
      - condition: state
        entity_id: alarm_control_panel.ha_alarm
        state: disarmed
      sequence:
      - service: alarm_control_panel.alarm_arm_home
        data: {}
        target:
          entity_id:
          - alarm_control_panel.dex
          - alarm_control_panel.extra
          - alarm_control_panel.kate
          - alarm_control_panel.homebase
    default: []
  mode: single
- id: '1665317579658'
  alias: Lights - Outdoor Sunset
  description: When sun is set turn on lights in garden
  trigger:
  - platform: sun
    event: sunset
    offset: 0
  condition: []
  action:
  - service: scene.turn_on
    data:
      transition: 10
    target:
      entity_id: scene.tuin_avond_normaal
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: scene.turn_on
    data: {}
    target:
      entity_id: scene.tuin_avond_normaal
  mode: single
- id: '1665346843605'
  alias: Lights - Outdoor Sunrise
  description: Disable outdoor lights on Sunrise
  trigger:
  - platform: sun
    event: sunrise
    offset: 0
  condition: []
  action:
  - service: light.turn_off
    data:
      transition: 5
    target:
      area_id: 2bf8bf6a88fe7668c26a7c9d15f993e9
  mode: single
- id: '1666034731318'
  alias: Lights - Overkapping (on/off)
  description: Turns on lights in Overkapping when motion is detected or door is opened
    and turn off automatically
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.overkapping_presence
  - platform: state
    entity_id:
    - binary_sensor.overkapping_movement
  - platform: state
    entity_id:
    - binary_sensor.overkapping_deur
  condition: []
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.overkapping_movement
          state: 'on'
        - condition: state
          entity_id: binary_sensor.overkapping_deur
          state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 100
          color_temp: 365
        target:
          entity_id: light.overkapping_lampen
    - conditions:
      - condition: state
        entity_id: binary_sensor.overkapping_presence
        state: 'on'
      - condition: state
        entity_id: binary_sensor.overkapping_movement
        state: 'off'
      - condition: state
        entity_id: light.overkapping_lampen
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
          transition: 3
          color_temp: 365
        target:
          entity_id: light.overkapping_lampen
    - conditions:
      - condition: state
        entity_id: binary_sensor.overkapping_presence
        state: 'off'
      - condition: state
        entity_id: binary_sensor.overkapping_movement
        state: 'off'
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.overkapping_deur
          state: 'off'
          for:
            hours: 0
            minutes: 1
            seconds: 0
        - condition: state
          entity_id: binary_sensor.overkapping_deur
          state: unavailable
          for:
            hours: 0
            minutes: 0
            seconds: 0
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.overkapping_lampen
  mode: single
- id: '1666820649282'
  alias: Lights - Gang beneden (on/off)
  description: Turns on lights in gang when motion is detected or door is opened and
    turn off automatically
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.gang_presence
  - platform: state
    entity_id:
    - binary_sensor.gang_movement
  - platform: state
    entity_id:
    - binary_sensor.gangdeur
    to: 'on'
  - platform: state
    entity_id:
    - binary_sensor.voordeur
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.gang_lightlevel
        below: 50
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.gang_movement
          state: 'on'
        - condition: state
          entity_id: binary_sensor.gangdeur
          state: 'on'
        - condition: state
          entity_id: binary_sensor.voordeur
          state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 45
        target:
          entity_id: light.gang_lampen
    - conditions:
      - condition: state
        entity_id: binary_sensor.gang_presence
        state: 'on'
      - condition: state
        entity_id: binary_sensor.gang_movement
        state: 'off'
      - condition: state
        entity_id: light.gang_lampen
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
          transition: 3
        target:
          entity_id: light.gang_lampen
    - conditions:
      - condition: state
        entity_id: binary_sensor.gang_presence
        state: 'off'
      - condition: state
        entity_id: binary_sensor.gang_movement
        state: 'off'
      - condition: state
        entity_id: binary_sensor.gangdeur
        state: 'off'
        for:
          hours: 0
          minutes: 0
          seconds: 15
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.gang_lampen
  mode: single
- id: '1668026155258'
  alias: Lights - Overkapping Schuur (on/off)
  description: Turns on schuur overkapping ledstrip when motion is detected or door
    is opened and turn off automatically
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.schuur_overkapping_presence
  - platform: state
    entity_id:
    - binary_sensor.schuur_overkapping_movement
  - platform: state
    entity_id:
    - binary_sensor.schuur_voordeur
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.schuur_overkapping_lightlevel
        below: 60
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.schuur_overkapping_movement
          state: 'on'
        - condition: state
          entity_id: binary_sensor.schuur_voordeur
          state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 100
        target:
          entity_id: light.schuur_ledstrip_overkapping
    - conditions:
      - condition: state
        entity_id: binary_sensor.schuur_overkapping_presence
        state: 'on'
      - condition: state
        entity_id: binary_sensor.schuur_overkapping_movement
        state: 'off'
      - condition: state
        entity_id: light.schuur_ledstrip_overkapping
        state: 'on'
      - condition: state
        entity_id: binary_sensor.schuur_voordeur
        state: 'off'
        for:
          hours: 0
          minutes: 0
          seconds: 30
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 10
        target:
          entity_id: light.schuur_ledstrip_overkapping
    - conditions:
      - condition: state
        entity_id: binary_sensor.schuur_overkapping_presence
        state: 'off'
      - condition: state
        entity_id: binary_sensor.schuur_overkapping_movement
        state: 'off'
      - condition: state
        entity_id: binary_sensor.schuur_voordeur
        state: 'off'
        for:
          hours: 0
          minutes: 0
          seconds: 30
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.schuur_ledstrip_overkapping
  mode: single
- id: '1674317742902'
  alias: Lights - Party Mode (Ledstrip overkapping)
  description: Runs colorloop
  use_blueprint:
    path: hugalafutro/Color_Loop.yaml
    input:
      cl_light:
        entity_id:
        - light.schuur_ledstrip_overkapping
- id: '1674324651198'
  alias: Lights - Party Mode (Overkapping 1)
  description: Runs colorloop
  use_blueprint:
    path: hugalafutro/Color_Loop.yaml
    input:
      cl_light:
        entity_id: light.overkapping_1
- id: '1674324684332'
  alias: Lights - Party Mode (Overkapping 2)
  description: Runs colorloop
  use_blueprint:
    path: hugalafutro/Color_Loop.yaml
    input:
      cl_light:
        entity_id: light.overkapping_2
- id: '1674324720881'
  alias: Lights - Party Mode (Overkapping 3)
  description: Runs colorloop
  use_blueprint:
    path: hugalafutro/Color_Loop.yaml
    input:
      cl_light:
        entity_id: light.overkapping_3
- id: '1674324756716'
  alias: Lights - Party Mode (Overkapping 4)
  description: Runs colorloop
  use_blueprint:
    path: hugalafutro/Color_Loop.yaml
    input:
      cl_light:
        entity_id: light.overkapping_4
- id: '1682939415231'
  alias: Sprinklers - Calendar Automation
  description: Enables/Disables sprinklers on set times, except when it's raining
  trigger:
  - platform: calendar
    event: start
    offset: 0:0:0
    entity_id: calendar.garden_schema
  - platform: calendar
    event: end
    offset: 0:0:0
    entity_id: calendar.garden_schema
  - platform: state
    entity_id:
    - vacuum.mower
    from: docked
  condition:
  - condition: template
    value_template: '{{ ''Gras Sproeien'' in trigger.calendar_event.summary }}'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.event == ''start'' }}'
      - condition: state
        entity_id: sensor.mower_state
        state: Docked
      - condition: not
        conditions:
        - condition: or
          conditions:
          - condition: state
            entity_id: weather.station_home
            state: rainy
          - condition: state
            entity_id: weather.station_home
            state: pouring
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.sonoff_sprinklers
      - service: notify.rens_telegram
        data:
          message: Sproeiers staan aan
    - conditions:
      - condition: or
        conditions:
        - condition: template
          value_template: '{{ trigger.event == ''end'' }}'
        - condition: not
          conditions:
          - condition: state
            entity_id: sensor.mower_state
            state: Docked
      - condition: state
        entity_id: switch.sonoff_sprinklers
        state: 'on'
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.sonoff_sprinklers
      - service: notify.rens_telegram
        metadata: {}
        data:
          message: Sproeiers staan uit
  mode: single
- id: '1689110580445'
  alias: Lights - Eetkamer (on/off)
  description: Turns on/off lights in eetkamer automatically based on presence and
    doors.
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.eetkamer_presence2
  - platform: state
    entity_id:
    - binary_sensor.achterdeur
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.everything_presence_one_fa2974_illuminance
        below: 50
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.eetkamer_presence2
          state: 'on'
        - condition: state
          entity_id: binary_sensor.achterdeur
          state: 'on'
      - condition: state
        entity_id: light.eetkamer
        state: 'off'
      sequence:
      - service: light.turn_on
        data: {}
        target:
          entity_id: light.eetkamer
    - conditions:
      - condition: state
        entity_id: binary_sensor.eetkamer_presence2
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.eetkamer
  mode: single
- id: '1691532303239'
  alias: Lights - Keuken (on/off)
  description: Turns on lights in keuken when motion is detected and turn off automatically
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.keuken_presence
  - platform: state
    entity_id:
    - binary_sensor.keuken_movement
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.keuken_lightlevel
        below: 50
      - condition: state
        entity_id: binary_sensor.keuken_movement
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 80
        target:
          entity_id: light.keuken
    - conditions:
      - condition: state
        entity_id: binary_sensor.keuken_presence
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      - condition: state
        entity_id: light.keuken
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
          transition: 3
        target:
          entity_id: light.keuken
    - conditions:
      - condition: state
        entity_id: binary_sensor.keuken_presence
        state: 'off'
        for:
          hours: 0
          minutes: 10
          seconds: 0
      - condition: state
        entity_id: light.keuken
        state: 'on'
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.keuken
  mode: single
- id: '1695850324992'
  alias: Lights - Keuken (blueprint)
  description: Turns on/off keuken lights, based on threshold helpers
  use_blueprint:
    path: freakshock88/motion_illuminance_activated_entity.yaml
    input:
      motion_sensor: binary_sensor.keuken_presence
      target_entity: light.keuken
      illuminance_sensor: sensor.keuken_lightlevel
      illuminance_cutoff: input_number.threshold_light_sensor
      blocker_entity: input_boolean.sleeping
      no_motion_wait: input_number.threshold_light_off_eetkamer
      turn_off_blocker_entity: input_boolean.guest_home
- id: '1695853546428'
  alias: Doorbell - Send notification (Telegram PoC)
  description: Send notification with camera image when doorbell is pressed to telegram
    group
  trigger:
  - type: turned_on
    platform: device
    device_id: b080a8910a40998b3b6401335df8fc6e
    entity_id: binary_sensor.doorbell
    domain: binary_sensor
  condition: []
  action:
  - service: camera.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: camera.voordeur
  - delay:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  - service: camera.snapshot
    metadata: {}
    data:
      filename: /media/cameras/voordeur_snapshot.jpg
    target:
      entity_id: camera.voordeur
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: notify.ha_thuis_group
    data:
      data:
        photo:
        - file: /media/cameras/voordeur_snapshot.jpg
          caption: Voordeur
      message: Notification
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  mode: single
- id: '1697368810031'
  alias: Lights - Eetkamer (blueprint)
  description: Turns on/off eetkamer lights, based on threshold helpers
  use_blueprint:
    path: freakshock88/motion_illuminance_activated_entity.yaml
    input:
      motion_sensor: binary_sensor.eetkamer_presence2
      target_entity: light.eetkamer
      illuminance_sensor: sensor.eetkamer_lightlevel
      illuminance_cutoff: input_number.threshold_light_sensor
      blocker_entity: input_boolean.sleeping
      no_motion_wait: input_number.threshold_light_off_eetkamer
      turn_off_blocker_entity: input_boolean.guest_home
- id: '1697369922445'
  alias: Lights - Woonkamer (blueprint)
  description: Turns on/off woonkamer lights, based on threshold helpers
  use_blueprint:
    path: freakshock88/motion_illuminance_activated_entity.yaml
    input:
      motion_sensor: binary_sensor.woonkamer_presence
      target_entity: light.woonkamer
      illuminance_sensor: sensor.woonkamer_lightlevel
      illuminance_cutoff: input_number.threshold_light_sensor
      blocker_entity: input_boolean.sleeping
      no_motion_wait: input_number.threshold_light_off_eetkamer
      turn_off_blocker_entity: media_player.kpn_tv_woonkamer
      sunstate_condition: Always
- id: '1702338245080'
  alias: Lights - Outdoor Automation
  description: Turn on/off lights based on sunset/sunrise in combination with sleep
    toggle.
  triggers:
  - event: sunset
    offset: 0
    trigger: sun
  - event: sunset
    offset: 00:01:00
    trigger: sun
  - event: sunrise
    offset: 0
    trigger: sun
  - event: sunrise
    offset: 00:01:00
    trigger: sun
  - entity_id:
    - input_boolean.sleeping
    trigger: state
  - event: sunset
    offset: 00:05:00
    trigger: sun
  - event: sunrise
    offset: 00:05:00
    trigger: sun
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: sun
        before: sunrise
        after: sunset
      - condition: state
        entity_id: input_boolean.sleeping
        state: 'off'
      sequence:
      - data:
          transition: 10
        target:
          entity_id: scene.tuin_avond_normaal
        action: scene.turn_on
    - conditions:
      - condition: sun
        before: sunrise
        after: sunset
      - condition: state
        entity_id: input_boolean.sleeping
        state: 'on'
      sequence:
      - data:
          transition: 10
        target:
          entity_id:
          - scene.tuin_avond_slapen
        action: scene.turn_on
    - conditions:
      - condition: sun
        before: sunset
        after: sunrise
      sequence:
      - data:
          transition: 10
        target:
          entity_id:
          - scene.tuin_overdag
        action: scene.turn_on
  mode: single
- id: '1719475856024'
  alias: Start Bedtime on NFC scan
  description: Turns on the 'Sleep' toggle
  trigger:
  - platform: tag
    tag_id: 8fddbf42-2aac-4857-ac76-e2d3a092cab4
  condition: []
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.sleeping
  mode: single
- id: '1724709018140'
  alias: Waste Reminder Notification
  description: At 20:00 on the day before waste needs to be collected, this automation
    sends a notification each hour until it's marked as completed.
  triggers:
  - hours: /1
    trigger: time_pattern
  conditions:
  - condition: state
    entity_id: binary_sensor.waste_collect_boolean_template
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: person.rens
      state: home
    - condition: state
      entity_id: person.nathasja
      state: home
  actions:
  - if:
    - condition: state
      entity_id: person.rens
      state: home
    then:
    - action: notify.rens
      data:
        title: Afval buiten zetten!
        message: '{{ states(''sensor.waste_type_notication'') }}'
        data:
          tag: waste-reminder
          actions: "{% set actions = [] %} {% if 'paper' in states('sensor.waste_types')
            %}\n  {% set actions = actions + [{\"action\": \"oud_papier_is_outside\",
            \"title\": \"Papier is buitengezet\"}] %}\n{% endif %} {% if 'pd' in states('sensor.waste_types')
            %}\n  {% set actions = actions + [{\"action\": \"plastic_is_outside\",
            \"title\": \"Plastic buiten gezet\"}] %}\n{% endif %} {% if 'gft' in states('sensor.waste_types')
            %}\n  {% set actions = actions + [{\"action\": \"groene_kliko_is_outside\",
            \"title\": \"Groene kliko buiten gezet\"}] %}\n{% endif %} {% if 'rest'
            in states('sensor.waste_types') %}\n  {% set actions = actions + [{\"action\":
            \"grijze_kliko_is_outside\", \"title\": \"Grijze kliko buiten gezet\"}]
            %}\n{% endif %} {{ actions }}\n"
  - if:
    - condition: state
      entity_id: person.nathasja
      state: home
    then:
    - action: notify.nathasja
      data:
        title: Afval buiten zetten!
        message: '{{ states(''sensor.waste_type_notication'') }}'
        data:
          tag: waste-reminder
          actions: "{% set actions = [] %} {% if 'paper' in states('sensor.waste_types')
            %}\n  {% set actions = actions + [{\"action\": \"oud_papier_is_outside\",
            \"title\": \"Papier is buitengezet\"}] %}\n{% endif %} {% if 'pd' in states('sensor.waste_types')
            %}\n  {% set actions = actions + [{\"action\": \"plastic_is_outside\",
            \"title\": \"Plastic buiten gezet\"}] %}\n{% endif %} {% if 'gft' in states('sensor.waste_types')
            %}\n  {% set actions = actions + [{\"action\": \"groene_kliko_is_outside\",
            \"title\": \"Groene kliko buiten gezet\"}] %}\n{% endif %} {% if 'rest'
            in states('sensor.waste_types') %}\n  {% set actions = actions + [{\"action\":
            \"grijze_kliko_is_outside\", \"title\": \"Grijze kliko buiten gezet\"}]
            %}\n{% endif %} {{ actions }}\n"
- id: '1724709485739'
  alias: Mark Waste as Taken Out from Notification Action
  description: ''
  triggers:
  - event_type: mobile_app_notification_action
    event_data:
      action: grijze_kliko_is_outside
    trigger: event
  - event_type: mobile_app_notification_action
    event_data:
      action: groene_kliko_is_outside
    trigger: event
  - event_type: mobile_app_notification_action
    event_data:
      action: plastic_is_outside
    trigger: event
  - event_type: mobile_app_notification_action
    event_data:
      action: oud_papier_is_outside
    trigger: event
  actions:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.action == "grijze_kliko_is_outside"
          }}'
      sequence:
      - action: input_boolean.turn_on
        target:
          entity_id: input_boolean.grijze_kliko_buiten_gezet
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.action == "groene_kliko_is_outside"
          }}'
      sequence:
      - action: input_boolean.turn_on
        target:
          entity_id: input_boolean.groene_kliko_buiten_gezet
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.action == "plastic_is_outside" }}'
      sequence:
      - action: input_boolean.turn_on
        target:
          entity_id: input_boolean.plastic_buiten_gezet
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.action == "oud_papier_is_outside" }}'
      sequence:
      - action: input_boolean.turn_on
        target:
          entity_id: input_boolean.oud_papier_buiten_gezet
        data: {}
- id: '1729436817554'
  alias: Waste reset thrash is outside booleans after 48 hours
  description: Makes sure that the {{wastetype}}_is_outside boolean are turned off
    again after 48 or 72 hours so it can be used for new waste collection notifications.
  triggers:
  - at: 05:00:00
    trigger: time
  conditions: []
  actions:
  - if:
    - condition: state
      entity_id: input_boolean.plastic_buiten_gezet
      state: 'on'
      for:
        hours: 48
        minutes: 0
        seconds: 0
    then:
    - target:
        entity_id: input_boolean.plastic_buiten_gezet
      action: input_boolean.turn_off
      data: {}
  - if:
    - condition: state
      entity_id: input_boolean.oud_papier_buiten_gezet
      state: 'on'
      for:
        hours: 48
        minutes: 0
        seconds: 0
    then:
    - target:
        entity_id: input_boolean.oud_papier_buiten_gezet
      action: input_boolean.turn_off
      data: {}
  - if:
    - condition: state
      entity_id: input_boolean.grijze_kliko_buiten_gezet
      state: 'on'
      for:
        hours: 72
        minutes: 0
        seconds: 0
    then:
    - target:
        entity_id: input_boolean.grijze_kliko_buiten_gezet
      action: input_boolean.turn_off
      data: {}
  - if:
    - condition: state
      entity_id: input_boolean.groene_kliko_buiten_gezet
      state: 'on'
      for:
        hours: 72
        minutes: 0
        seconds: 0
    then:
    - target:
        entity_id: input_boolean.groene_kliko_buiten_gezet
      action: input_boolean.turn_off
      data: {}
  mode: single
